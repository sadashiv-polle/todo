var y=(h,x,i)=>new Promise((r,n)=>{var p=o=>{try{c(i.next(o))}catch(b){n(b)}},s=o=>{try{c(i.throw(o))}catch(b){n(b)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(p,s);c((i=i.apply(h,x)).next())});import{_ as A,h as E,r as f,q as F,o as N,a as d,c as u,b as e,m as M,v as g,x as V,y as v,F as D,z as P,t as m,n as z,l as _,A as B}from"./index-CaZ8Fn9-.js";const $={class:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-100 p-10"},j={class:"max-w-5xl mx-auto"},I={class:"flex flex-col min-w-[170px]"},L={class:"flex flex-col min-w-[210px]"},R={class:"flex flex-col min-w-[210px]"},T={class:"overflow-x-auto rounded-xl shadow bg-white border border-blue-100 relative"},q={class:"min-w-full text-sm text-left"},J={class:"px-6 py-4 whitespace-nowrap"},O={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap"},H={key:0},K={key:1},Q={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},X=["onClick"],Y={key:0},Z={key:0,class:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center rounded-xl backdrop-blur-sm text-lg font-semibold text-blue-700"},ee={class:"mt-6 flex justify-between items-center gap-4 select-none"},te=["disabled"],se={class:"text-gray-500"},le=["disabled"],w=20,oe={__name:"Users",setup(h){const x=E(),i=f([]),r=f(!1),n=f(1),p=f(!0),s=F({enabled:"",name:"",email:""});function c(){const a=[];return s.enabled!==""&&a.push(["enabled","=",s.enabled==="1"?1:0]),s.name&&s.name.trim()&&a.push(["first_name","like",`%${s.name.trim()}%`]),s.email&&s.email.trim()&&a.push(["email","like",`%${s.email.trim()}%`]),a}function o(){return y(this,null,function*(){r.value=!0;try{const a={filters:JSON.stringify(c()),order_by:"creation desc",limit_page_length:w,page:n.value},t=yield B.post("/api/method/todo.api.user.get_users_with_roles",a);i.value=t.data.message||[],p.value=i.value.length===w}catch(a){console.error(a),alert("Failed to fetch users")}finally{r.value=!1}})}function b(){n.value=1,o()}function k(){s.enabled="",s.name="",s.email="",b()}function U(a){x.push({name:"Userdetails",params:{userName:a}})}function C(){n.value>1&&(n.value--,o())}function S(){p.value&&(n.value++,o())}return N(()=>{o()}),(a,t)=>(d(),u("div",$,[e("div",j,[t[10]||(t[10]=e("h1",{class:"text-3xl font-bold text-blue-700 mb-7"},"All Users",-1)),e("form",{onSubmit:M(b,["prevent"]),class:"mb-6 flex flex-row gap-6 items-end bg-white p-6 rounded-xl shadow border border-blue-200"},[e("div",I,[t[4]||(t[4]=e("label",{for:"enabled-filter",class:"mb-1 text-sm font-semibold text-blue-700"},"Enabled",-1)),g(e("select",{id:"enabled-filter","onUpdate:modelValue":t[0]||(t[0]=l=>s.enabled=l),class:"border border-blue-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white transition"},t[3]||(t[3]=[e("option",{value:""},"All",-1),e("option",{value:"1"},"Enabled",-1),e("option",{value:"0"},"Disabled",-1)]),512),[[V,s.enabled]])]),e("div",L,[t[5]||(t[5]=e("label",{for:"name-filter",class:"mb-1 text-sm font-semibold text-blue-700"},"Name",-1)),g(e("input",{id:"name-filter","onUpdate:modelValue":t[1]||(t[1]=l=>s.name=l),type:"search",autocomplete:"off",placeholder:"Search name",class:"border border-blue-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white transition"},null,512),[[v,s.name]])]),e("div",R,[t[6]||(t[6]=e("label",{for:"email-filter",class:"mb-1 text-sm font-semibold text-blue-700"},"Email",-1)),g(e("input",{id:"email-filter","onUpdate:modelValue":t[2]||(t[2]=l=>s.email=l),type:"search",autocomplete:"off",placeholder:"Search email",class:"border border-blue-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white transition"},null,512),[[v,s.email]])]),e("div",{class:"flex gap-2 ml-2"},[t[7]||(t[7]=e("button",{type:"submit",class:"px-5 py-2.5 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition"},"Apply",-1)),e("button",{type:"button",onClick:k,class:"px-4 py-2.5 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 transition border border-gray-300"},"Clear")])],32),e("div",T,[e("table",q,[t[9]||(t[9]=e("thead",null,[e("tr",{class:"bg-blue-600 text-white uppercase text-xs font-semibold"},[e("th",{class:"px-6 py-4"},"Username"),e("th",{class:"px-6 py-4"},"Email"),e("th",{class:"px-6 py-4"},"Roles"),e("th",{class:"px-6 py-4"},"Status"),e("th",{class:"px-6 py-4"},"Actions")])],-1)),e("tbody",null,[(d(!0),u(D,null,P(i.value,l=>(d(),u("tr",{key:l.name,class:"border-b border-blue-50 hover:bg-blue-50 transition"},[e("td",J,m(l.username||l.first_name||(l.email?l.email.split("@")[0]:"-")),1),e("td",O,m(l.email||"-"),1),e("td",G,[l.roles&&l.roles.length?(d(),u("span",H,m(l.roles[0]),1)):(d(),u("span",K,"-"))]),e("td",Q,[e("span",{class:z(["px-3 py-1 rounded-full text-xs font-semibold",l.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},m(l.enabled?"Active":"Inactive"),3)]),e("td",W,[e("button",{class:"bg-blue-600 px-3 py-1.5 rounded hover:bg-blue-700 transition text-white font-semibold",onClick:ae=>U(l.name)}," Edit ",8,X)])]))),128)),i.value.length===0&&!r.value?(d(),u("tr",Y,t[8]||(t[8]=[e("td",{colspan:"5",class:"text-center py-10 text-gray-400 !font-semibold"},"No users found.",-1)]))):_("",!0)])]),r.value?(d(),u("div",Z," Loading... ")):_("",!0)]),e("div",ee,[e("button",{class:"px-6 py-2 rounded-lg border border-gray-300 font-medium text-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed bg-white shadow-sm",disabled:r.value||n.value===1,onClick:C}," Previous ",8,te),e("span",se,"Page "+m(n.value),1),e("button",{class:"px-6 py-2 rounded-lg border border-gray-300 font-medium text-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed bg-white shadow-sm",disabled:r.value||!p.value,onClick:S}," Next ",8,le)])])]))}},re=A(oe,[["__scopeId","data-v-ede3d4d3"]]);export{re as default};
//# sourceMappingURL=Users-CV9_p3oq.js.map
