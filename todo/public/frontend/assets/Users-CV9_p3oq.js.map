{"version":3,"file":"Users-CV9_p3oq.js","sources":["../../../../frontend/src/pages/Users.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-100 p-10\">\n    <div class=\"max-w-5xl mx-auto\">\n\n      <h1 class=\"text-3xl font-bold text-blue-700 mb-7\">All Users</h1>\n\n      <!-- Filter Controls -->\n      <form @submit.prevent=\"applyFilters\"\n        class=\"mb-6 flex flex-row gap-6 items-end bg-white p-6 rounded-xl shadow border border-blue-200\">\n        <div class=\"flex flex-col min-w-[170px]\">\n          <label for=\"enabled-filter\" class=\"mb-1 text-sm font-semibold text-blue-700\">Enabled</label>\n          <select id=\"enabled-filter\" v-model=\"filters.enabled\"\n            class=\"border border-blue-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white transition\">\n            <option value=\"\">All</option>\n            <option value=\"1\">Enabled</option>\n            <option value=\"0\">Disabled</option>\n          </select>\n        </div>\n        <div class=\"flex flex-col min-w-[210px]\">\n          <label for=\"name-filter\" class=\"mb-1 text-sm font-semibold text-blue-700\">Name</label>\n          <input id=\"name-filter\" v-model=\"filters.name\" type=\"search\" autocomplete=\"off\" placeholder=\"Search name\"\n            class=\"border border-blue-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white transition\" />\n        </div>\n        <div class=\"flex flex-col min-w-[210px]\">\n          <label for=\"email-filter\" class=\"mb-1 text-sm font-semibold text-blue-700\">Email</label>\n          <input id=\"email-filter\" v-model=\"filters.email\" type=\"search\" autocomplete=\"off\" placeholder=\"Search email\"\n            class=\"border border-blue-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white transition\" />\n        </div>\n        <div class=\"flex gap-2 ml-2\">\n          <button type=\"submit\"\n            class=\"px-5 py-2.5 rounded-md bg-blue-600 text-white font-semibold hover:bg-blue-700 transition\">Apply</button>\n          <button type=\"button\" @click=\"clearFilters\"\n            class=\"px-4 py-2.5 rounded-md bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 transition border border-gray-300\">Clear</button>\n        </div>\n      </form>\n\n      <!-- Users Table -->\n      <div class=\"overflow-x-auto rounded-xl shadow bg-white border border-blue-100 relative\">\n        <table class=\"min-w-full text-sm text-left\">\n          <thead>\n            <tr class=\"bg-blue-600 text-white uppercase text-xs font-semibold\">\n              <th class=\"px-6 py-4\">Username</th>\n              <th class=\"px-6 py-4\">Email</th>\n              <th class=\"px-6 py-4\">Roles</th>\n              <th class=\"px-6 py-4\">Status</th>\n              <th class=\"px-6 py-4\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"user in users\" :key=\"user.name\" \n                class=\"border-b border-blue-50 hover:bg-blue-50 transition\">\n              <td class=\"px-6 py-4 whitespace-nowrap\">{{ user.username || user.first_name || (user.email ? user.email.split('@')[0] : '-') }}</td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">{{ user.email || '-' }}</td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <span v-if=\"user.roles && user.roles.length\">{{ user.roles[0] }}</span>\n                <span v-else>-</span>\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <span :class=\"[\n                  'px-3 py-1 rounded-full text-xs font-semibold',\n                  user.enabled ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                ]\">{{ user.enabled ? 'Active' : 'Inactive' }}</span>\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <button\n                  class=\"bg-blue-600 px-3 py-1.5 rounded hover:bg-blue-700 transition text-white font-semibold\"\n                  @click=\"goToUserDetails(user.name)\">\n                  Edit\n                </button>\n              </td>\n            </tr>\n            <tr v-if=\"users.length === 0 && !loading\">\n              <td colspan=\"5\" class=\"text-center py-10 text-gray-400 !font-semibold\">No users found.</td>\n            </tr>\n          </tbody>\n        </table>\n        <div v-if=\"loading\" \n          class=\"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center rounded-xl backdrop-blur-sm text-lg font-semibold text-blue-700\">\n          Loading...\n        </div>\n      </div>\n\n      <!-- Pagination -->\n      <div class=\"mt-6 flex justify-between items-center gap-4 select-none\">\n        <button\n          class=\"px-6 py-2 rounded-lg border border-gray-300 font-medium text-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed bg-white shadow-sm\"\n          :disabled=\"loading || page === 1\"\n          @click=\"prevPage\"\n        >\n          Previous\n        </button>\n        <span class=\"text-gray-500\">Page {{ page }}</span>\n        <button\n          class=\"px-6 py-2 rounded-lg border border-gray-300 font-medium text-gray-600 transition disabled:opacity-50 disabled:cursor-not-allowed bg-white shadow-sm\"\n          :disabled=\"loading || !hasMore\"\n          @click=\"nextPage\"\n        >\n          Next\n        </button>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n\n<script setup>\nimport { ref, reactive, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\n\nconst router = useRouter();\n\nconst users = ref([]);\nconst loading = ref(false);\nconst page = ref(1);\nconst pageSize = 20;\nconst hasMore = ref(true);\n\nconst filters = reactive({\n  enabled: \"\",\n  name: \"\",\n  email: \"\",\n});\n\nfunction buildFilters() {\n  const fltrs = [];\n  if (filters.enabled !== \"\") fltrs.push([\"enabled\", \"=\", filters.enabled === \"1\" ? 1 : 0]);\n  if (filters.name && filters.name.trim()) fltrs.push([\"first_name\", \"like\", `%${filters.name.trim()}%`]);\n  if (filters.email && filters.email.trim()) fltrs.push([\"email\", \"like\", `%${filters.email.trim()}%`]);\n  return fltrs;\n}\n\nasync function fetchUsers() {\n  loading.value = true;\n  try {\n    const params = {\n      filters: JSON.stringify(buildFilters()),\n      order_by: \"creation desc\",\n      limit_page_length: pageSize,\n      page: page.value,\n    };\n    const res = await axios.post(\"/api/method/todo.api.user.get_users_with_roles\", params);\n    users.value = res.data.message || [];\n    hasMore.value = users.value.length === pageSize;\n  } catch (e) {\n    console.error(e);\n    alert(\"Failed to fetch users\");\n  } finally {\n    loading.value = false;\n  }\n}\n\nfunction applyFilters() {\n  page.value = 1;\n  fetchUsers();\n}\n\nfunction clearFilters() {\n  filters.enabled = \"\";\n  filters.name = \"\";\n  filters.email = \"\";\n  applyFilters();\n}\n\nfunction goToUserDetails(userName) {\n  router.push({ name: \"Userdetails\", params: { userName } });\n}\n\nfunction prevPage() {\n  if (page.value > 1) {\n    page.value--;\n    fetchUsers();\n  }\n}\n\nfunction nextPage() {\n  if (hasMore.value) {\n    page.value++;\n    fetchUsers();\n  }\n}\n\nonMounted(() => {\n  fetchUsers();\n});\n</script>\n\n<style scoped>\n/* You can add custom styles below or use your Tailwind config */\n</style>\n"],"names":["pageSize","router","useRouter","users","ref","loading","page","hasMore","filters","reactive","buildFilters","fltrs","fetchUsers","__async","params","res","axios","e","applyFilters","clearFilters","goToUserDetails","userName","prevPage","nextPage","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_hoisted_3","$event","_vModelSelect","_hoisted_4","_vModelText","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","user","_hoisted_8","_toDisplayString","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_normalizeClass","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21"],"mappings":"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"}